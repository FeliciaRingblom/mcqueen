<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report9" pageWidth="595" pageHeight="842" orientation="Portrait" columnWidth="505" leftMargin="60" rightMargin="30" topMargin="20" bottomMargin="20">
	<style name="Arial_Normal" isDefault="true" fontName="Arial" fontSize="8" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="Arial_Bold" isDefault="false" fontName="Arial" fontSize="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<parameter name="groupLeft" class="java.lang.String">
		<defaultValueExpression><![CDATA["    "]]></defaultValueExpression>
	</parameter>
	<parameter name="groupRight" class="java.lang.String">
		<defaultValueExpression><![CDATA["     "]]></defaultValueExpression>
	</parameter>
		<parameter name="groupMissed" class="java.lang.String">
		<defaultValueExpression><![CDATA["    "]]></defaultValueExpression>
	</parameter>
	<queryString language="xPath">
		<![CDATA[report/reactionMeasurement]]>
	</queryString>
	<field name="reactionGroup" class="java.lang.String">
		<fieldDescription><![CDATA[reactionGroup]]></fieldDescription>
	</field>
	<field name="reactionResult" class="java.lang.Integer">
		<fieldDescription><![CDATA[reactionResult]]></fieldDescription>
	</field>
	<field name="reactionTime" class="java.lang.Integer">
		<fieldDescription><![CDATA[reactionTime]]></fieldDescription>
	</field>
	<field name="absoluteTime" class="java.lang.Long">
		<fieldDescription><![CDATA[absoluteTime]]></fieldDescription>
	</field>
	<field name="experimentTime" class="java.lang.Long">
		<fieldDescription><![CDATA[experimentTime]]></fieldDescription>
	</field>
	<field name="reactionID" class="java.lang.Long">
		<fieldDescription><![CDATA[reactionID]]></fieldDescription>
	</field>
	<variable name="startTime" class="java.lang.Long" calculation="Lowest">
		<variableExpression><![CDATA[$F{absoluteTime}]]></variableExpression>
	</variable>
	<variable name="endTime" class="java.lang.Long" calculation="Highest">
		<variableExpression><![CDATA[$F{absoluteTime}]]></variableExpression>
	</variable>
	<variable name="averageReactionTimeLeft" class="java.lang.Integer" calculation="Average">
		<variableExpression><![CDATA[$F{reactionGroup}.equals($P{groupLeft}) && ($F{reactionResult} > 0)
						     ? $F{reactionTime}:null]]></variableExpression>
	</variable>
	<variable name="averageReactionTimeRight" class="java.lang.Integer" calculation="Average">
		<variableExpression><![CDATA[$F{reactionGroup}.equals($P{groupRight}) && ($F{reactionResult} > 0)
						     ? $F{reactionTime}:null]]></variableExpression>
	</variable>
	<variable name="missedReaction" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[($F{reactionResult} < 0 ? 1 : 0)]]></variableExpression>
	</variable>
	<variable name="amountReactions" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[($F{reactionResult})]]></variableExpression>
	</variable>
	<variable name="experimentDuration" class="java.lang.Long" calculation="Highest">
		<variableExpression><![CDATA[$F{experimentTime}]]></variableExpression>
	</variable>
	<variable name="lowestReactionTime" class="java.lang.Integer" calculation="Lowest">
		<variableExpression><![CDATA[(($F{reactionResult} < 0 && $F{reactionResult} > -2) ? -$F{reactionTime} : 0)]]></variableExpression>
	</variable>
	<variable name="lowestReactionTimeLeft" class="java.lang.Integer" calculation="Lowest">
		<variableExpression><![CDATA[(($F{reactionResult} > 0 && $F{reactionGroup}.equals($P{groupLeft})) ? $F{reactionTime} : null)]]></variableExpression>
	</variable>
	<variable name="lowestReactionTimeRight" class="java.lang.Integer" calculation="Lowest">
		<variableExpression><![CDATA[(($F{reactionResult} > 0 && $F{reactionGroup}.equals($P{groupRight})) ? $F{reactionTime} : null)]]></variableExpression>
	</variable>
	<variable name="highestReactionTime" class="java.lang.Integer" calculation="Highest">
		<variableExpression><![CDATA[(($F{reactionResult} > 0 || $F{reactionResult} < -1) ? $F{reactionTime} : 1000)]]></variableExpression>
	</variable>
	<variable name="highestReactionTimeLeft" class="java.lang.Integer" calculation="Highest">
		<variableExpression><![CDATA[(($F{reactionResult} > 0 && $F{reactionGroup}.equals($P{groupLeft})) ? $F{reactionTime} : null)]]></variableExpression>
	</variable>
	<variable name="highestReactionTimeRight" class="java.lang.Integer" calculation="Highest">
		<variableExpression><![CDATA[(($F{reactionResult} > 0 && $F{reactionGroup}.equals($P{groupRight})) ? $F{reactionTime} : null)]]></variableExpression>
	</variable>
	<title>
		<band height="90">
			<staticText>
				<reportElement x="0" y="40" width="375" height="50" style="Arial_Bold"/>
				<textElement textAlignment="Left">
					<font size="24"/>
				</textElement>
				<text><![CDATA[Test Resultat]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="80">
			<staticText>
				<reportElement x="0" y="0" width="200" height="14" style="Arial_Normal"/>
				<textElement textAlignment="Left">
					<font size="12"/>
				</textElement>
				<text><![CDATA[löpnummer]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="15" width="200" height="14" style="Arial_Normal"/>
				<textElement textAlignment="Left">
					<font size="12"/>
				</textElement>
				<text><![CDATA[ålder]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="30" width="200" height="14" style="Arial_Normal"/>
				<textElement textAlignment="Left">
					<font size="12"/>
				</textElement>
				<text><![CDATA[kön]]></text>
			</staticText>
			<staticText>
				<reportElement x="210" y="5" width="100" height="30" style="Arial_Bold"/>
				<textElement textAlignment="Right">
					<font size="24"/>
				</textElement>
				<text><![CDATA[8.0]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="70" width="490" height="1"/>
				<graphicElement>
					<pen lineWidth="1"/>
				</graphicElement>
			</line>
		</band>
	</pageHeader>
	<detail>
		<band splitType="Stretch"/>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="500">
			<staticText>
				<reportElement x="0" y="0" width="300" height="30" style="Arial_Bold"/>
				<textElement textAlignment="Left"><font size="18"/></textElement>
				<text><![CDATA[Sammanfattning]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="25" width="300" height="30" style="Arial_Normal"/>
				<textElement textAlignment="Left"><font size="10"/></textElement>
				<text><![CDATA[Antal Stimuli: ]]></text>
			</staticText>
 			<textField isBlankWhenNull="true">
				<reportElement x="65" y="25" width="515" height="30"/>
				<textElement textAlignment="Left"><font size="10"/></textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{amountReactions}]]></textFieldExpression>
			</textField> 
			<staticText>
				<reportElement x="100" y="25" width="300" height="30" style="Arial_Normal"/>
				<textElement textAlignment="Left"><font size="10"/></textElement>
				<text><![CDATA[Missad: ]]></text>
			</staticText>
 			<textField isBlankWhenNull="true">
				<reportElement x="140" y="25" width="515" height="30"/>
				<textElement textAlignment="Left"><font size="10"/></textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{missedReaction}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="175" y="25" width="300" height="30" style="Arial_Normal"/>
				<textElement textAlignment="Left"><font size="10"/></textElement>
				<text><![CDATA[Reaktionstid vänster: ]]></text>
			</staticText>
 			<textField isBlankWhenNull="true">
				<reportElement x="270" y="25" width="515" height="30"/>
				<textElement textAlignment="Left"><font size="10"/></textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{averageReactionTimeLeft}]]></textFieldExpression>
			</textField>	
			<staticText>
				<reportElement x="295" y="25" width="300" height="30" style="Arial_Normal"/>
				<textElement textAlignment="Left"><font size="10"/></textElement>
				<text><![CDATA[ms]]></text>
			</staticText>
			<staticText>
				<reportElement x="335" y="25" width="300" height="30" style="Arial_Normal"/>
				<textElement textAlignment="Left">
					<font size="10"/>
				</textElement>
				<text><![CDATA[Reaktionstid höger: ]]></text>
			</staticText>
 			<textField isBlankWhenNull="true">
				<reportElement x="423" y="25" width="515" height="30"/>
				<textElement textAlignment="Left"><font size="10"/></textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{averageReactionTimeRight}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="453" y="25" width="300" height="30" style="Arial_Normal"/>
				<textElement textAlignment="Left"><font size="10"/></textElement>
				<text><![CDATA[ms]]></text>
			</staticText>
			<rectangle radius="15">
				<reportElement x="0" y="60" width="480" height="120" backcolor="#E6E6E6"/>
				<graphicElement pen="None"/>
			</rectangle>
			<staticText>
				<reportElement x="150" y="70" width="110" height="30" style="Arial_Bold"/>
				<textElement textAlignment="Center"><font size="12"/></textElement>
				<text><![CDATA[Del 1]]></text>
			</staticText>
 			<textField isBlankWhenNull="true">
				<reportElement x="150" y="100" width="110" height="30"/>
				<textElement textAlignment="Center"><font size="12"/></textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{missedReaction}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="205" y="125" width="0" height="50" forecolor="#FFFFFF"/>
				<graphicElement><pen lineWidth="1"/></graphicElement>
			</line>
 			<textField isBlankWhenNull="true">
				<reportElement x="150" y="130" width="55" height="30"/>
				<textElement textAlignment="Center"><font size="12"/></textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{averageReactionTimeLeft}]]></textFieldExpression>
			</textField>
 			<textField isBlankWhenNull="true">
				<reportElement x="205" y="130" width="55" height="30"/>
				<textElement textAlignment="Center"><font size="12"/></textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{averageReactionTimeRight}]]></textFieldExpression>
			</textField>
 			<textField isBlankWhenNull="true">
				<reportElement x="150" y="143" width="55" height="30"/>
				<textElement textAlignment="Center"><font size="12"/></textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{lowestReactionTimeLeft}]]></textFieldExpression>
			</textField>
 			<textField isBlankWhenNull="true">
				<reportElement x="205" y="143" width="55" height="30"/>
				<textElement textAlignment="Center"><font size="12"/></textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{lowestReactionTimeRight}]]></textFieldExpression>
			</textField>
 			<textField isBlankWhenNull="true">
				<reportElement x="150" y="156" width="55" height="30"/>
				<textElement textAlignment="Center"><font size="12"/></textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{highestReactionTimeLeft}]]></textFieldExpression>
			</textField>
 			<textField isBlankWhenNull="true">
				<reportElement x="205" y="156" width="55" height="30"/>
				<textElement textAlignment="Center"><font size="12"/></textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{highestReactionTimeRight}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="260" y="65" width="0" height="110" forecolor="#FFFFFF"/>
				<graphicElement><pen lineWidth="2"/></graphicElement>
			</line>
			<staticText>
				<reportElement x="260" y="70" width="110" height="30" style="Arial_Bold"/>
				<textElement textAlignment="Center"><font size="12"/></textElement>
				<text><![CDATA[Del 2]]></text>
			</staticText>
			<line>
				<reportElement x="370" y="65" width="0" height="110" forecolor="#FFFFFF"/>
				<graphicElement><pen lineWidth="2"/></graphicElement>
			</line>
			<staticText>
				<reportElement x="370" y="70" width="110" height="30" style="Arial_Bold"/>
				<textElement textAlignment="Center"><font size="12"/></textElement>
				<text><![CDATA[Del 3]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="210" width="300" height="30" style="Arial_Bold"/>
				<textElement textAlignment="Left">
					<font size="18"/>
				</textElement>
				<text><![CDATA[Del 1]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="240" width="300" height="30" style="Arial_Normal"/>
				<textElement textAlignment="Left">
					<font size="12"/>
				</textElement>
				<text><![CDATA[Reaktionsförmåga]]></text>
			</staticText>
			<staticText>
				<reportElement x="310" y="240" width="300" height="30" style="Arial_Normal"/>
				<textElement textAlignment="Left">
					<font size="12"/>
				</textElement>
				<text><![CDATA[Vinglighet]]></text>
			</staticText>
		<xyBarChart>
			<chart isShowLegend="false">
				<reportElement mode="Transparent" x="0" y="300" width="250" height="100"/>
				<box leftPadding="0"/>
				<chartTitle/>
				<chartSubtitle/>
			</chart>
			<xyDataset>
				<xySeries>
					<seriesExpression><![CDATA[$P{groupLeft}]]></seriesExpression>
					<xValueExpression><![CDATA[$F{reactionID}]]></xValueExpression>		
					<yValueExpression><![CDATA[$F{reactionGroup}.equals($P{groupLeft}) ?
						((($F{reactionResult} < 0) ? 0 : -$F{reactionTime})):0]]>
					</yValueExpression>
					<labelExpression><![CDATA[""]]></labelExpression>
				</xySeries>
				<xySeries>
					<seriesExpression><![CDATA[$P{groupRight}]]></seriesExpression>	
					<xValueExpression><![CDATA[$F{reactionID}]]></xValueExpression>	
					<yValueExpression><![CDATA[$F{reactionGroup}.equals($P{groupRight}) ?
						((($F{reactionResult} < 0) ? 0 : $F{reactionTime})):0]]>
					</yValueExpression>
					<labelExpression><![CDATA[""]]></labelExpression>
				</xySeries>
				<xySeries>
					<seriesExpression><![CDATA[$P{groupMissed}]]></seriesExpression>	
					<xValueExpression><![CDATA[$F{reactionID}]]></xValueExpression>	
					<yValueExpression><![CDATA[$F{reactionGroup}.equals($P{groupRight}) ?
						((($F{reactionResult} < 0) ? 10000 : 0)):(($F{reactionResult} < 0) ? -10000 : 0)]]>
					</yValueExpression>
					<labelExpression><![CDATA[""]]></labelExpression>
				</xySeries>
			

			</xyDataset>
			<barPlot isShowLabels="false" isShowTickLabels="false" isShowTickMarks="false">
				<plot orientation="Horizontal">
					<seriesColor seriesOrder="0" color="#DA3C08"/> <!--röd-->
					<seriesColor seriesOrder="1" color="#1B7BA7"/> <!--ljus-->
					<seriesColor seriesOrder="2" color="#1B7BA7"/> 
					
				</plot>
		<!-- 		<itemLabel>
					<font size="8" isUnderline="false"/>
				</itemLabel> -->
				<categoryAxisFormat><!-- fungerar ej? -->
					<axisFormat verticalTickLabels="false" tickLabelColor="#FFFFFF" axisLineColor="#FFFFFF"/>
				</categoryAxisFormat>

				<domainAxisMinValueExpression><![CDATA[-0.5]]></domainAxisMinValueExpression>
				<domainAxisMaxValueExpression><![CDATA[10.5]]></domainAxisMaxValueExpression>
				<rangeAxisMinValueExpression><![CDATA[-3000]]></rangeAxisMinValueExpression>
				<rangeAxisMaxValueExpression><![CDATA[3000]]></rangeAxisMaxValueExpression>
			</barPlot>
		</xyBarChart>
		<staticText>
			<reportElement x="0" y="280" width="125" height="30" style="Arial_Normal" forecolor="#1B7BA7"/>
			<textElement textAlignment="Right">
				<font size="11"/>
			</textElement>
				<text><![CDATA[Vänster]]></text>
		</staticText>
		<staticText>
			<reportElement x="145" y="280" width="300" height="30" style="Arial_Normal" forecolor="#1B7BA7"/>
			<textElement textAlignment="Left">
				<font size="11"/>
			</textElement>
				<text><![CDATA[Höger]]></text>
		</staticText>	

		<line>
			<reportElement x="135" y="290" width="0" height="95" forecolor="#42485A"/>
			<graphicElement>
				<pen lineWidth="2"/>
			</graphicElement>
		</line>
	</band>
</summary>

</jasperReport>
